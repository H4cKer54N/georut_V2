{% load i18n %}
<nav class="main-header navbar navbar-expand navbar-white navbar-light">
  
  <ul class="navbar-nav">
    <li class="nav-item">
    <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
    </li>
    </ul>
    
    <ul class="navbar-nav ml-auto">
    <li class="dropdown mt-2">
      <a class="nav-link" data-toggle="dropdown" href="#">
        <i class="far fa-lg fa-bell"></i>
        <span class="badge badge-warning navbar-badge">15</span>
      </a>
      <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
        <span class="dropdown-item dropdown-header">15 {%trans 'Notifications'%}</span>
        <div class="dropdown-divider"></div>
        <a href="#" class="dropdown-item">
          <i class="fas fa-envelope mr-2"></i> 4 new messages
          <span class="float-right text-muted text-sm">3 mins</span>
        </a>
        <div class="dropdown-divider"></div>
        <a href="#" class="dropdown-item">
          <i class="fas fa-users mr-2"></i> 8 friend requests
          <span class="float-right text-muted text-sm">12 hours</span>
        </a>
        <div class="dropdown-divider"></div>
        <a href="#" class="dropdown-item">
          <i class="fas fa-file mr-2"></i> 3 new reports
          <span class="float-right text-muted text-sm">2 days</span>
        </a>
        <div class="dropdown-divider"></div>
        <a href="#" class="dropdown-item dropdown-footer">{%trans 'See all notifications'%}</a>
      </div>
    </li>
    <li class="nav-item">
      {% include '../language.html' %}
    </li>

    <li class="nav-item dropdown mt-2 mr-2">
      <a class="nav-link" data-toggle="dropdown" href="#"><i class="far fa-lg fa-user-circle"></i></a>
      <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
        <a href="#" class="dropdown-item">
          <i class="fas fa-edit mr-2"></i> {% trans 'Update user'%}
        </a>
        <div class="dropdown-divider"></div>
        <a href="#" class="dropdown-item"><i class="fas fa-lock mr-2"></i> {% trans 'Change password' %}</a>
        <div class="dropdown-divider"></div>
        <a id="logout" href="{% url "Users:logout" %}" class="dropdown-item"><i class="fas fa-sign-out-alt"></i> {% trans 'Logout' %}</a>
      </div>
    </li>
  </ul>
</nav>

<script>
  const lang = window.location.pathname.split("/")[1];
  let title = "Atención!"
  let text = "¿Seguro que desea cerrar sesión?"
  let cancelbuttontext = "No, cancelar"
  let confirmbuttontext = "Si, cerrar sesión"

  if(lang == "en"){
    title = "Attention!"
    text = "Are you sure you want to log out?"
    cancelbuttontext = "No, cancel"
    confirmbuttontext = "Yes, log out"
  }
  else if (lang == "it"){
    title = "Attenzione!"
    text = "Sicuro di voler uscire?"
    cancelbuttontext = "No, annulla"
    confirmbuttontext = "Si, Chiudi sessione"
  }
  $("#logout").click(e=>{
   e.preventDefault();
    Swal.fire({
      title: title,
      text: text,
      icon:"warning",
      showCancelButton:true,
      cancelButtonText:cancelbuttontext,
      confirmButtonText: confirmbuttontext,
      reverseButtons:true
    }).then((result)=>{
      if(result.isConfirmed){
        window.location.href = "/logout/";
      }
    }
    )
  });
</script>
